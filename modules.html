<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Modules</title>
<style>
body {
    margin:0;
    font-family:"Poppins",sans-serif;
    background:url('bg.png') no-repeat center center fixed;
    background-size:cover;
    display:flex;
    flex-direction:column;
    min-height:100vh;
}

/* HEADER */
.top-bar {
    display:flex;
    align-items:center;
    padding:15px 20px;
    gap:15px;
}
.top-bar img {
    width:70px;
    border-radius:12px;
    border:3px solid rgba(255,240,0,0.9);
    box-shadow:0 0 10px rgba(255,240,0,0.6);
}
.top-title {
    display:flex;
    flex-direction:column;
    color:black;
    font-weight:600;
    font-size:17px;
    line-height:1.2;
    text-shadow:1px 1px 2px white;
}

/* GRID */
.grid-container {
    flex:1;
    display:grid;
    grid-template-columns:repeat(4,1fr);
    grid-auto-rows:120px;
    gap:15px;
    padding:15px;
}
.grid-item {
    display:flex;
    justify-content:center;
    align-items:center;
    font-weight:bold;
    font-size:18px;
    color:black;
    text-align:center;
    border-radius:12px;
    cursor:pointer;
    transition:transform 0.2s, box-shadow 0.2s;
}
.grid-item:hover {
    transform:scale(1.03);
    box-shadow:0 0 10px rgba(255,240,0,0.5);
}

/* BOTTOM TEXT */
.bottom-text {
    text-align:center;
    padding:15px;
    font-weight:bold;
    color:black;
    font-size:20px;
    text-shadow:1px 1px 2px white;
}

/* MOBILE */
@media(max-width:768px){
    .grid-container { grid-template-columns:repeat(2,1fr); }
}
</style>
</head>
<body>

<!-- HEADER -->
<div class="top-bar">
    <img src="uetco.png" alt="Logo">
    <div class="top-title">
        <span>UNIFIED ENVIRONMENT FOR</span>
        <span>THEORIES AND CREATIVE OUTPUT</span>
    </div>
</div>

<h2 id="subjectTitle" style="text-align:center; color:black; margin:20px;">Modules</h2>

<!-- GRID -->
<div class="grid-container" id="gridContainer"></div>

<div class="bottom-text">UETCO</div>

<script>
// Same inline JSON
const data =   {
    subjects: [
        {
            name: "tology",
            modules: [
                { name: "mothaviyal", files: ["pdf/naan.pdf"] },
                { name: "numera", files: ["pdf/naan.pdf"] }
            ]
        },
        {
            name: "tamil",
            modules: [
                { name: "fiction", files: ["pdf/naan.pdf"] },
                { name: "non fiction", files: ["pdf/naan.pdf"] }
            ]
        },
        {
            name:"english",
            modules:[
                { name:"fiction",files:["pdf/naan.pdf"]},
                { name:"non fiction",files:["pdf/naan.pdf"]}
            ]
        }

    ]
};

// Random pastel color generator
function getRandomColor(){
    const r = Math.floor(Math.random()*156)+100;
    const g = Math.floor(Math.random()*156)+100;
    const b = Math.floor(Math.random()*156)+100;
    return `rgb(${r},${g},${b})`;
}

// Get URL param
function getParam(name){
    const url = new URL(window.location.href);
    return url.searchParams.get(name);
}

// Render modules
function renderModules(){
    const subjectIndex = parseInt(getParam('subjectIndex'));
    if(isNaN(subjectIndex) || !data.subjects[subjectIndex]){
        alert("Invalid subject");
        return;
    }
    const subject = data.subjects[subjectIndex];
    document.getElementById('subjectTitle').textContent = `Modules of ${subject.name}`;
    const modules = subject.modules;
    const container = document.getElementById('gridContainer');
    container.innerHTML = '';
    const maxCells = Math.max(modules.length, 16);
    for(let i=0;i<maxCells;i++){
        const div = document.createElement('div');
        div.className = 'grid-item';
        if(modules[i]){
            div.textContent = `${i+1}. ${modules[i].name}`;
            div.style.backgroundColor = getRandomColor();
            div.onclick = ()=>{
                window.location.href = `files.html?subjectIndex=${subjectIndex}&moduleIndex=${i}`;
            };
        }
        container.appendChild(div);
    }
}

renderModules();
</script>

</body>
</html>

